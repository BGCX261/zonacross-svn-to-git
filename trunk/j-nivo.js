(function($){var Q=function(B,C){var D=$.extend({},$.fn.nivoSlider.defaults,C);var E={currentSlide:0,currentImage:'',totalSlides:0,running:false,paused:false,stop:false};var F=$(B);F.data('nivo:vars',E);F.css('position','relative');F.addClass('nivoSlider');var G=F.children();G.each(function(){var a=$(this);var b='';if(!a.is('img')){if(a.is('a')){a.addClass('nivo-imageLink');b=a}a=a.find('img:first')}var c=a.width();if(c==0)c=a.attr('width');var d=a.height();if(d==0)d=a.attr('height');if(c>F.width()){F.width(c)}if(d>F.height()){F.height(d)}if(b!=''){b.css('display','none')}a.css('display','none');E.totalSlides++});if(D.randomStart){D.startSlide=Math.floor(Math.random()*E.totalSlides)}if(D.startSlide>0){if(D.startSlide>=E.totalSlides)D.startSlide=E.totalSlides-1;E.currentSlide=D.startSlide}if($(G[E.currentSlide]).is('img')){E.currentImage=$(G[E.currentSlide])}else{E.currentImage=$(G[E.currentSlide]).find('img:first')}if($(G[E.currentSlide]).is('a')){$(G[E.currentSlide]).css('display','block')}F.css('background','url("'+E.currentImage.attr('src')+'") no-repeat');F.append($('<div class="nivo-caption"><p></p></div>').css({display:'none',opacity:D.captionOpacity}));$('.nivo-caption',F).css('opacity',0);var H=function(a){var b=$('.nivo-caption',F);if(E.currentImage.attr('title')!=''&&E.currentImage.attr('title')!=undefined){var c=E.currentImage.attr('title');if(c.substr(0,1)=='#')c=$(c).html();if(b.css('opacity')!=0){b.find('p').stop().fadeTo(a.animSpeed,0,function(){$(this).html(c);$(this).stop().fadeTo(a.animSpeed,1)})}else{b.find('p').html(c)}b.stop().fadeTo(a.animSpeed,a.captionOpacity)}else{b.stop().fadeTo(a.animSpeed,0)}}H(D);var I=0;if(!D.manualAdvance&&G.length>1){I=setInterval(function(){N(F,G,D,false)},D.pauseTime)}if(D.directionNav){F.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+D.prevText+'</a><a class="nivo-nextNav">'+D.nextText+'</a></div>');if(D.directionNavHide){$('.nivo-directionNav',F).hide();F.hover(function(){$('.nivo-directionNav',F).show()},function(){$('.nivo-directionNav',F).hide()})}$('a.nivo-prevNav',F).live('click',function(){if(E.running)return false;clearInterval(I);I='';E.currentSlide-=2;N(F,G,D,'prev')});$('a.nivo-nextNav',F).live('click',function(){if(E.running)return false;clearInterval(I);I='';N(F,G,D,'next')})}if(D.controlNav){var J=$('<div class="nivo-controlNav"></div>');F.append(J);for(var i=0;i<G.length;i++){if(D.controlNavThumbs){var K=G.eq(i);if(!K.is('img')){K=K.find('img:first')}if(D.controlNavThumbsFromRel){J.append('<a class="nivo-control" rel="'+i+'"><img src="'+K.attr('rel')+'" alt="" /></a>')}else{J.append('<a class="nivo-control" rel="'+i+'"><img src="'+K.attr('src').replace(D.controlNavThumbsSearch,D.controlNavThumbsReplace)+'" alt="" /></a>')}}else{J.append('<a class="nivo-control" rel="'+i+'">'+(i+1)+'</a>')}}$('.nivo-controlNav a:eq('+E.currentSlide+')',F).addClass('active');$('.nivo-controlNav a',F).live('click',function(){if(E.running)return false;if($(this).hasClass('active'))return false;clearInterval(I);I='';F.css('background','url("'+E.currentImage.attr('src')+'") no-repeat');E.currentSlide=$(this).attr('rel')-1;N(F,G,D,'control')})}if(D.keyboardNav){$(window).keypress(function(a){if(a.keyCode=='37'){if(E.running)return false;clearInterval(I);I='';E.currentSlide-=2;N(F,G,D,'prev')}if(a.keyCode=='39'){if(E.running)return false;clearInterval(I);I='';N(F,G,D,'next')}})}if(D.pauseOnHover){F.hover(function(){E.paused=true;clearInterval(I);I=''},function(){E.paused=false;if(I==''&&!D.manualAdvance){I=setInterval(function(){N(F,G,D,false)},D.pauseTime)}})}F.bind('nivo:animFinished',function(){E.running=false;$(G).each(function(){if($(this).is('a')){$(this).css('display','none')}});if($(G[E.currentSlide]).is('a')){$(G[E.currentSlide]).css('display','block')}if(I==''&&!E.paused&&!D.manualAdvance){I=setInterval(function(){N(F,G,D,false)},D.pauseTime)}D.afterChange.call(this)});var L=function(a,b,c){for(var i=0;i<b.slices;i++){var d=Math.round(a.width()/b.slices);if(i==b.slices-1){a.append($('<div class="nivo-slice"></div>').css({left:(d*i)+'px',width:(a.width()-(d*i))+'px',height:'0px',opacity:'0',background:'url("'+c.currentImage.attr('src')+'") no-repeat -'+((d+(i*d))-d)+'px 0%'}))}else{a.append($('<div class="nivo-slice"></div>').css({left:(d*i)+'px',width:d+'px',height:'0px',opacity:'0',background:'url("'+c.currentImage.attr('src')+'") no-repeat -'+((d+(i*d))-d)+'px 0%'}))}}}var M=function(a,b,c){var d=Math.round(a.width()/b.boxCols);var e=Math.round(a.height()/b.boxRows);for(var f=0;f<b.boxRows;f++){for(var g=0;g<b.boxCols;g++){if(g==b.boxCols-1){a.append($('<div class="nivo-box"></div>').css({opacity:0,left:(d*g)+'px',top:(e*f)+'px',width:(a.width()-(d*g))+'px',height:e+'px',background:'url("'+c.currentImage.attr('src')+'") no-repeat -'+((d+(g*d))-d)+'px -'+((e+(f*e))-e)+'px'}))}else{a.append($('<div class="nivo-box"></div>').css({opacity:0,left:(d*g)+'px',top:(e*f)+'px',width:d+'px',height:e+'px',background:'url("'+c.currentImage.attr('src')+'") no-repeat -'+((d+(g*d))-d)+'px -'+((e+(f*e))-e)+'px'}))}}}}var N=function(f,g,j,k){var l=f.data('nivo:vars');if(l&&(l.currentSlide==l.totalSlides-1)){j.lastSlide.call(this)}if((!l||l.stop)&&!k)return false;j.beforeChange.call(this);if(!k){f.css('background','url("'+l.currentImage.attr('src')+'") no-repeat')}else{if(k=='prev'){f.css('background','url("'+l.currentImage.attr('src')+'") no-repeat')}if(k=='next'){f.css('background','url("'+l.currentImage.attr('src')+'") no-repeat')}}l.currentSlide++;if(l.currentSlide==l.totalSlides){l.currentSlide=0;j.slideshowEnd.call(this)}if(l.currentSlide<0)l.currentSlide=(l.totalSlides-1);if($(g[l.currentSlide]).is('img')){l.currentImage=$(g[l.currentSlide])}else{l.currentImage=$(g[l.currentSlide]).find('img:first')}if(j.controlNav){$('.nivo-controlNav a',f).removeClass('active');$('.nivo-controlNav a:eq('+l.currentSlide+')',f).addClass('active')}H(j);$('.nivo-slice',f).remove();$('.nivo-box',f).remove();var m=j.effect;if(j.effect=='random'){var n=new Array('sliceDownRight','sliceDownLeft','sliceUpRight','sliceUpLeft','sliceUpDown','sliceUpDownLeft','fold','fade','boxRandom','boxRain','boxRainReverse','boxRainGrow','boxRainGrowReverse');m=n[Math.floor(Math.random()*(n.length+1))];if(m==undefined)m='fade'}if(j.effect.indexOf(',')!=-1){var n=j.effect.split(',');m=n[Math.floor(Math.random()*(n.length))];if(m==undefined)m='fade'}if(l.currentImage.attr('data-transition')){m=l.currentImage.attr('data-transition')}l.running=true;if(m=='sliceDown'||m=='sliceDownRight'||m=='sliceDownLeft'){L(f,j,l);var o=0;var i=0;var p=$('.nivo-slice',f);if(m=='sliceDownLeft')p=$('.nivo-slice',f)._reverse();p.each(function(){var a=$(this);a.css({'top':'0px'});if(i==j.slices-1){setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed,'',function(){f.trigger('nivo:animFinished')})},(100+o))}else{setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed)},(100+o))}o+=50;i++})}else if(m=='sliceUp'||m=='sliceUpRight'||m=='sliceUpLeft'){L(f,j,l);var o=0;var i=0;var p=$('.nivo-slice',f);if(m=='sliceUpLeft')p=$('.nivo-slice',f)._reverse();p.each(function(){var a=$(this);a.css({'bottom':'0px'});if(i==j.slices-1){setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed,'',function(){f.trigger('nivo:animFinished')})},(100+o))}else{setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed)},(100+o))}o+=50;i++})}else if(m=='sliceUpDown'||m=='sliceUpDownRight'||m=='sliceUpDownLeft'){L(f,j,l);var o=0;var i=0;var v=0;var p=$('.nivo-slice',f);if(m=='sliceUpDownLeft')p=$('.nivo-slice',f)._reverse();p.each(function(){var a=$(this);if(i==0){a.css('top','0px');i++}else{a.css('bottom','0px');i=0}if(v==j.slices-1){setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed,'',function(){f.trigger('nivo:animFinished')})},(100+o))}else{setTimeout(function(){a.animate({height:'100%',opacity:'1.0'},j.animSpeed)},(100+o))}o+=50;v++})}else if(m=='fold'){L(f,j,l);var o=0;var i=0;$('.nivo-slice',f).each(function(){var a=$(this);var b=a.width();a.css({top:'0px',height:'100%',width:'0px'});if(i==j.slices-1){setTimeout(function(){a.animate({width:b,opacity:'1.0'},j.animSpeed,'',function(){f.trigger('nivo:animFinished')})},(100+o))}else{setTimeout(function(){a.animate({width:b,opacity:'1.0'},j.animSpeed)},(100+o))}o+=50;i++})}else if(m=='fade'){L(f,j,l);var q=$('.nivo-slice:first',f);q.css({'height':'100%','width':f.width()+'px'});q.animate({opacity:'1.0'},(j.animSpeed*2),'',function(){f.trigger('nivo:animFinished')})}else if(m=='slideInRight'){L(f,j,l);var q=$('.nivo-slice:first',f);q.css({'height':'100%','width':'0px','opacity':'1'});q.animate({width:f.width()+'px'},(j.animSpeed*2),'',function(){f.trigger('nivo:animFinished')})}else if(m=='slideInLeft'){L(f,j,l);var q=$('.nivo-slice:first',f);q.css({'height':'100%','width':'0px','opacity':'1','left':'','right':'0px'});q.animate({width:f.width()+'px'},(j.animSpeed*2),'',function(){q.css({'left':'0px','right':''});f.trigger('nivo:animFinished')})}else if(m=='boxRandom'){M(f,j,l);var r=j.boxCols*j.boxRows;var i=0;var o=0;var s=O($('.nivo-box',f));s.each(function(){var a=$(this);if(i==r-1){setTimeout(function(){a.animate({opacity:'1'},j.animSpeed,'',function(){f.trigger('nivo:animFinished')})},(100+o))}else{setTimeout(function(){a.animate({opacity:'1'},j.animSpeed)},(100+o))}o+=20;i++})}else if(m=='boxRain'||m=='boxRainReverse'||m=='boxRainGrow'||m=='boxRainGrowReverse'){M(f,j,l);var r=j.boxCols*j.boxRows;var i=0;var o=0;var t=0;var u=0;var x=new Array();x[t]=new Array();var s=$('.nivo-box',f);if(m=='boxRainReverse'||m=='boxRainGrowReverse'){s=$('.nivo-box',f)._reverse()}s.each(function(){x[t][u]=$(this);u++;if(u==j.boxCols){t++;u=0;x[t]=new Array()}});for(var y=0;y<(j.boxCols*2);y++){var z=y;for(var A=0;A<j.boxRows;A++){if(z>=0&&z<j.boxCols){(function(a,b,c,i,d){var e=$(x[a][b]);var w=e.width();var h=e.height();if(m=='boxRainGrow'||m=='boxRainGrowReverse'){e.width(0).height(0)}if(i==d-1){setTimeout(function(){e.animate({opacity:'1',width:w,height:h},j.animSpeed/1.3,'',function(){f.trigger('nivo:animFinished')})},(100+c))}else{setTimeout(function(){e.animate({opacity:'1',width:w,height:h},j.animSpeed/1.3)},(100+c))}})(A,z,o,i,r);i++}z--}o+=100}}}var O=function(a){for(var j,x,i=a.length;i;j=parseInt(Math.random()*i),x=a[--i],a[i]=a[j],a[j]=x);return a}var P=function(a){if(this.console&&typeof console.log!="undefined")console.log(a)}this.stop=function(){if(!$(B).data('nivo:vars').stop){$(B).data('nivo:vars').stop=true;P('Stop Slider')}}this.start=function(){if($(B).data('nivo:vars').stop){$(B).data('nivo:vars').stop=false;P('Start Slider')}}D.afterLoad.call(this);return this};$.fn.nivoSlider=function(e){return this.each(function(a,b){var c=$(this);if(c.data('nivoslider'))return c.data('nivoslider');var d=new Q(this,e);c.data('nivoslider',d)})};$.fn.nivoSlider.defaults={effect:'random',slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:'.jpg',controlNavThumbsReplace:'_thumb.jpg',keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:'Prev',nextText:'Next',randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};$.fn._reverse=[].reverse})(jQuery);